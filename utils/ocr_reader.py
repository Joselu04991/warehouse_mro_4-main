import logging
import os

logger = logging.getLogger(__name__)

def extract_text(path: str) -> str:
    """
    Función SIMULADA que devuelve el texto exacto de tu ejemplo.
    En producción, reemplazar con pytesseract.
    """
    if not os.path.exists(path):
        raise FileNotFoundError(f"Archivo no encontrado: {path}")
    
    logger.info(f"Procesando archivo (simulado): {os.path.basename(path)}")
    
    # Este es el texto EXACTO de tu ejemplo
    return """
===== Page 1 =====

 TICKET DE BASCULA

PE- ML- CHIMBOTE CHIMBOTE

PROCESO : 852752 NRO. PESAJE : 1677506 FECHA IMPRESION: Jan 14 2026 5:37PM

TARJETA : 210528 OPERACION: 71- DESCARGA INSUMOS PLACA : CDL733 CONDUCTOR: MEDINA PEREZ JHON PROVEEDOR: EMPRESA SIDERURGICA DEL PERU S

FECHA TIPO PESO (KG) PESAJE TARA 16910 Jan 14 2026 5:37PM BRUTO 48590 Jan 14 2026 2:51PM NETO 31880 Jan 14 2026 5:37PM

===== Page 2 =====

 **DATOS DEL INICIO DE TRASLADO**
FECHA DE EMISION: 13/01/2026
DIRECCION DEL PUNTO DE PARTIDA: NRO. SN CAS. APAN ALTO REF.: (A 200M CAR. BAMBAMARCA KM 113), CAJAMARCA - HUALGAYOC - BAMBAMARCA

MOTIVO DE TRASLADO: 1 - VENTA

MODALIDAD DE TRANSPORTE: PRIVADO

DIRECCION DEL PUNTO DE PARTIDA:

NRO. SN CAS. APAN ALTO REF.: (A 200M CAR. BAMBAMARCA KM 113), CAJAMARCA - HUALGAYOC - BAMBAMARCA

**DATOS DEL TRANSPORTE**

FECHA Y HORA DEL INICIO TRASLADO: 13/01/26 06:00 PM

MARCA PLACA TIPO Y DOCUMENTO APELLIDOS Y NOMBRES VOLVO CDL733 DNI 46695131 MEDINA PÉREZ JHON BILLY

**DATOS DEL PUNTO DESTINO**

DIRECCION DEL PUNTO DE LLEGADA:

AV. SANTIAG ANTUNEZ DE MAYOLO NRO. S/N Z.I. ZONA INDUSTRIAL, ANCASH - SANTA - CHIMBOTE

Ruta Fiscal: 1 - PANAMERICANA NORTE

**DATOS DEL DESTINATARIO**

APELLIDOS, NOMBRES, DENOMINACION O RAZON SOCIAL:

TIPO Y DOCUMENTO DE IDENTIDAD:

EMPRESA SIDERURGICA DEL PERU S.A.A.

RUC 2040288554B


===== Page 3 =====

1-102200001- 000001- OXIDO DE CALCIO- OXIDO UN1910/ 000001 DE CALCIO 71.52 % MIN AL 90.80 % 8 MAX EN KILOGRAMO 1.000000 KILOGRAMO CON PESO BRUTO DE 1.000000 Y CON PESO NETO DE 1.000000 KG KG 30000 1 30000.000000 Peso Neto de la guia 30000.000000 Peso Bruto Total de la guia 30000.000000 CODI GO DE VERIFICACION: 05141511650101550 OBSERVACIONES:CONDUCTOR: MEDINA PEREZ JHON BILLY /LIC: L46695131 |PLACA TRACTO: CDL-733 |PLACA CARRETA: TPL-973
"""


def extract_text_simple(path: str) -> str:
    """Versión simple compatible."""
    try:
        return extract_text(path)
    except Exception as e:
        logger.error(f"Error: {e}")
        return ""
